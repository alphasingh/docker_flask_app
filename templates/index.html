<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Todo</title>
    <!--link rel="stylesheet" type="text/css" href="styles.css"-->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <h1>Your free todo app</h1>
    <button class="plus-button" id="openModalBtn">+</button>

    <!-- Modal -->
    <div class="modal" id="myModal">
        <div class="modal-content">
            <span class="close" id="closeModalBtn">&times;</span>
            <h2>Enter Values</h2>
            <form id="valueForm">
                <label for="inputValue">Value:</label>
                <input type="text" id="inputValue" name="inputValue" required>
                <br><br>
                <button type="submit">Submit</button>
            </form>
        </div>
    </div>

    <script>
        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the button that opens the modal
        var btn = document.getElementById("openModalBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementById("closeModalBtn");

        // When the user clicks the button, open the modal
        btn.onclick = function() {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }

        // Form submission handling
        document.getElementById("valueForm").onsubmit = function(event) {
            event.preventDefault(); // Prevent the default form submission
            var value = document.getElementById("inputValue").value;
            console.log("Entered Value:", value); // Do something with the value
            modal.style.display = "none"; // Close the modal
        }
    </script>
    <hr>
    <div class="content">
    <form method="post">
        <p>
            <b><label for="content">Todo content</label></b>
        </p>
        <p>
            <label>
                <input type="text" name="content"
                    placeholder="Todo Content">
            </label>
        </p>

        <p>
            <b><label for="degree">Degree</label></b>
        </p>
        <p>
            <input id="degree-0" name="degree" required type="radio" value="Important">
            <label for="degree-0">Important</label>
        </p>
        <p>
            <input id="degree-1" name="degree" required type="radio" value="Unimportant">
            <label for="degree-1">Unimportant</label>
        </p>
        <button type="submit">Submit</button>
    </form>

    <hr>
    {% for todo in todos %}
        <div class="todo">
            <p>{{ todo['content'] }} <i>({{ todo['degree']}})</i></p>
	            <form method="POST" action="{{ url_for('todos.delete', oid=todo['_id']) }}" >
                    <input type="submit" value="Delete Todo"
                       onclick="return confirm('Are you sure you want to delete this entry?')">
                </form>
	    </div>
    {% endfor %}

    </div>
</body>
</html>
